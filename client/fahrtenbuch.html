<head>
  <title>Das Fahrtenbuch</title>
</head>

<body>
    <div id="vehicles-list-container">
        <h1>Fahrzeuge</h1>
        {{> vehicles}}
    </div>

    <div id="drives-list-container">
        {{> drives}}
    </div>

</body>

<template name="vehicles">

    {{#each vehicleList}}
    <div class="vehicle {{selected}}">
        <span class="icon">⛐</span> {{plate}}
    </div>
    {{/each}}

    <div id="createVehicle">
        <input type="text" id="new-vehicle-plate" placeholder="Neues KFZ..." />
    </div>

</template>

<template name="drives">

    {{#if any_vehicle_selected}}
        <table id="drives-list">
            <thead>
            <tr>
                <th>Startzeit</th>
                <th>Endzeit</th>
                <th>Start KM</th>
                <th>Ende KM</th>
                <th>Beschreibung</th>
                <th>Tester</th>
                <th>Privatfahrt</th>
                <th>Erfolgreiche Mieten</th>
                <th>Fehlgeschlagene Mieten</th>
            </tr>
            </thead>
            <tbody>
                {{#each driveList}}
                <tr class="drive {{selected}}">
                    <td>{{startTime}}</td>
                    <td>{{endTime}}</td>
                    <td>{{startKM}}</td>
                    <td>{{endKM}}</td>
                    <td>{{description}}</td>
                    <td>{{tester.name}}@{{tester.company}}</td>
                    <!-- TODO get tester here!
                         Maybe have separate template with function... -->
                    <td>
                        {{#if privateDrive}}
                        ✓ ja
                        {{else}}
                        ✗ nein
                        {{/if}}
                    </td>
                    <td>{{successfulRentals}}</td>
                    <td>{{failedRentals}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>

        <div id="new-drive" class="header-box">
            {{> newDrive}}
        </div>

        {{#if new_tester_open}}
            <div id="new-tester" class="header-box">
                {{>newTester}}
            </div>
        {{/if}}

    {{else}}
        <div class="info-box">
            Bitte ein Fahrzeug auswählen...
        </div>
    {{/if}}

</template>

<template name="newDrive">
    <h2>Neue Fahrt</h2>
    <label>
        <span>Von</span>
        <input type="datetime-local" class="start"/>
    </label>
    <label>
        <span>Bis</span>
        <input type="datetime-local" class="end"/>
    </label>
    <label>
        <span>Fahrtbeschreibung</span>
        <input type="text" min="1" class="description" width="500" />
    </label>
    <label>
        <span>Privatfahrt</span>
        <input type="checkbox" class="private" checked/>
    </label>
    <label>
        <span>Erfolgreiche Mieten</span>
        <input type="number" min="0" max="42" class="successfulRentals"/>
    </label>
    <label>
        <span>Fehlgeschlagene Mieten</span>
        <input type="number" min="0" max="42" class="failedRentals"/>
    </label>
    <label>
        <span>Start-KM</span>
        <input type="number" min="1" max="1000000" class="startKM"/>
    </label>
    <label>
        <span>End-KM</span>
        <input type="number" min="1" max="1000000" class="endKM"/>
    </label>
    <label>
        <span>Tester</span>
        <select class="selectedTester">
            {{#each testerList}}
            <option value="{{_id}}">{{name}} - {{company}}</option>
            {{/each}}
        </select>
        <a href="#" class="newTester">Neuer Tester</a>
    </label>
    <div>
        <input type="button" class="save" value="Speichern" />
    </div>

</template>

<template name="newTester">
    <h2>Neuer Tester <a href="#" class="closeBtn">X</a></h2>
    <label>
        <span>Name</span>
        <input type="text" class="name" />
    </label>
    <label>
        <span>Firma</span>
        <input type="text" class="company" />
    </label>
    <div>
        <input type="button" class="save" value="Speichern" />
    </div>

</template>